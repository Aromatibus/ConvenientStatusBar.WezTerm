<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>カラースペクトラム / カラーパレット</title>
<style>
body {
  background:#111111;
  color:#EEEEEE;
  font-family: sans-serif;
  transition: background 0.15s ease;
}
h1, h2 { margin-top:24px; }
.note {
  font-size: 12px;
  color: #AAAAAA;
  margin: 4px 0 12px 0;
}
.grad {
  display:inline-block;
  width:24px;
  height:24px;
  cursor:pointer;
}
.copy-row { margin:4px 0; }
.dot {
  width:12px;
  height:12px;
  display:inline-block;
  margin-right:6px;
  cursor:pointer;
  vertical-align:middle;
}
.hex {
  cursor:pointer;
  font-family: monospace;
}
.name {
  cursor:pointer;
  color:inherit;
  text-decoration: underline;
}
.src {
  color:#AAAAAA;
  margin-left:4px;
}
.sep { margin:0 4px; }

#bg-indicator {
  position: fixed;
  right: 8px;
  bottom: 6px;
  font-size: 11px;
  color: #AAAAAA;
  opacity: 0.9;
  pointer-events: auto;
  background: rgba(0,0,0,0.35);
  padding: 4px 6px;
  border-radius: 6px;
}

#bg-indicator .label {
  margin-right: 2px;
  font-family: monospace;
}

#bg-indicator input {
  width: 48px;
  height: 24px;
  background: #000088;       /* 入力欄 背景色 固定 */
  border: 2px solid #EEEEEE; /* 太枠 */
  border-radius: 4px;
  outline: none;
  color: #C0C0C0;            /* 入力欄 テキスト色 固定 */
  font-family: monospace;
  font-size: 12px;
  padding: 0 6px;
  box-sizing: border-box;
}
</style>
<script>
const bgCycle = [
  "#000000",
  "#FF0000",
  "#FFFF00",
  "#FFFFFF",
  "#00FFFF",
  "#0000FF",
];

let bgIndex = 0;

function showToast(message) {
  const toast = document.createElement("div");
  toast.textContent = "Copied: " + message;
  toast.style.position = "fixed";
  toast.style.left = "50%";
  toast.style.top = "50%";
  toast.style.transform = "translate(-50%, -50%)";
  toast.style.padding = "10px 16px";
  toast.style.background = "#333333";
  toast.style.color = "#FFFFFF";
  toast.style.borderRadius = "8px";
  toast.style.boxShadow = "0 2px 12px rgba(0,0,0,0.5)";
  toast.style.zIndex = 9999;
  toast.style.fontSize = "12px";
  document.body.appendChild(toast);

  setTimeout(() => {
    toast.style.transition = "opacity 0.4s";
    toast.style.opacity = "0";
    setTimeout(() => toast.remove(), 400);
  }, 1200);
}

function copyHex(hex) {
  navigator.clipboard.writeText(hex);
  showToast(hex);
}

function copyName(name) {
  navigator.clipboard.writeText(name);
  showToast(name);
}

function copyNameHex(name, hex) {
  const text = `"${name}","${hex}"`;
  navigator.clipboard.writeText(text);
  showToast(text);
}

function onGradClick(ev, name, hex) {
  ev.preventDefault();
  if (ev.shiftKey) {
    copyName(name);
  } else if (ev.ctrlKey || ev.metaKey) {
    copyHex(hex);
  } else {
    copyNameHex(name, hex);
  }
}

function getLuminance(hex) {
  const r = parseInt(hex.substr(1, 2), 16) / 255;
  const g = parseInt(hex.substr(3, 2), 16) / 255;
  const b = parseInt(hex.substr(5, 2), 16) / 255;
  return 0.2126 * r + 0.7152 * g + 0.0722 * b;
}

function applyTextColorByBg(hex) {
  const lum = getLuminance(hex);
  document.body.style.color = lum > 0.6 ? "#000000" : "#FFFFFF";
}

function normalizeHex(input) {
  let v = input.trim();
  if (/^[0-9A-Fa-f]{6}$/.test(v)) {
    v = "#" + v;
  }
  return v.toUpperCase();
}

function isValidHexColor(hex) {
  return /^#[0-9A-Fa-f]{6}$/.test(hex);
}

function updateBgIndicator(hex) {
  const input = document.getElementById("bg-input");
  if (!input) return;
  input.value = hex.replace("#", "");
}

function setBackground(hex) {
  if (!isValidHexColor(hex)) return;
  document.body.style.background = hex;
  applyTextColorByBg(hex);
  updateBgIndicator(hex);
}

function cycleBackground() {
  bgIndex = (bgIndex + 1) % bgCycle.length;
  setBackground(bgCycle[bgIndex]);
}

document.addEventListener("click", function(ev) {
  const t = ev.target;
  if (
    t.classList.contains("grad") ||
    t.classList.contains("dot") ||
    t.classList.contains("hex") ||
    t.classList.contains("name") ||
    t.id === "bg-input"
  ) {
    return;
  }
  cycleBackground();
});

document.addEventListener("DOMContentLoaded", function() {
  setBackground(bgCycle[bgIndex]);

  const input = document.getElementById("bg-input");
  if (!input) return;

  input.addEventListener("input", function() {
    const hex2 = normalizeHex(input.value);
    if (isValidHexColor(hex2)) {
      setBackground(hex2);
    }
  });

  input.addEventListener("keydown", function(ev) {
    if (ev.key === "Enter") {
      const hex2 = normalizeHex(input.value);
      if (isValidHexColor(hex2)) {
        setBackground(hex2);
      }
      input.blur();
    }
  });
});
</script>
</head>
<body>

<h1>◆カラースペクトラム（全{{TOTAL_COUNT}}色）</h1>
<div class="note">
  ※ホバーで「名前 (分類) : カラーコード」表示 / クリックでコピー
</div>

<h2>■ カラー（{{COLOR_COUNT}}色）</h2>
<div>{{GRAD_COLORS}}</div>

<h2>■ モノクロ（{{MONO_COUNT}}色）</h2>
<div>{{GRAD_MONOS}}</div>

<h1>◆カラーパレット</h1>

<h2>■ カラー（{{COLOR_COUNT}}色）</h2>
{{LIST_COLORS}}

<h2>■ モノクロ（{{MONO_COUNT}}色）</h2>
{{LIST_MONOS}}

<div id="bg-indicator">
  <span class="label">bg:#</span>
  <input id="bg-input" type="text" value="000000" maxlength="6" />
</div>

</body>
</html>
